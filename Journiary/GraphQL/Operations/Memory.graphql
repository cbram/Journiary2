# Memory CRUD Operations

fragment MemoryFragment on Memory {
  id
  title
  content
  location
  tripId
  userId
  createdAt
  updatedAt
}

fragment MediaItemFragment on MediaItem {
  id
  filename
  mimeType
  url
  memoryId
  createdAt
}

query GetMemories($tripId: ID, $userId: ID, $limit: Int, $offset: Int) {
  memories(tripId: $tripId, userId: $userId, limit: $limit, offset: $offset) {
    ...MemoryFragment
    mediaItems {
      ...MediaItemFragment
    }
    tags {
      id
      name
      color
      category {
        id
        name
      }
    }
  }
}

query GetMemory($id: ID!) {
  memory(id: $id) {
    ...MemoryFragment
    mediaItems {
      ...MediaItemFragment
    }
    tags {
      id
      name
      color
      category {
        id
        name
      }
    }
  }
}

mutation CreateMemory($input: MemoryInput!) {
  createMemory(input: $input) {
    ...MemoryFragment
  }
}

mutation UpdateMemory($id: ID!, $input: UpdateMemoryInput!) {
  updateMemory(id: $id, input: $input) {
    ...MemoryFragment
  }
}

mutation DeleteMemory($id: ID!) {
  deleteMemory(id: $id)
}

# Memory Search
query SearchMemories($query: String!, $tripId: ID, $tags: [String!]) {
  searchMemories(query: $query, tripId: $tripId, tags: $tags) {
    ...MemoryFragment
    mediaItems {
      ...MediaItemFragment
    }
  }
} 